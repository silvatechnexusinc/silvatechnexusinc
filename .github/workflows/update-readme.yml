name: 🔁 Auto Update GitHub Stats

on:
  schedule:
    - cron: "0 0 * * *"   # Runs daily at 00:00 UTC
  workflow_dispatch:       # Allow manual trigger

jobs:
  update-readme:
    runs-on: ubuntu-latest

    steps:
      - name: 🧩 Checkout Repository
        uses: actions/checkout@v3

      - name: ⚙️ Run Profile Readme Stats Updater
        uses: lowlighter/metrics@latest
        with:
          # REQUIRED: Your GitHub username
          token: ${{ secrets.METRICS_TOKEN }}
          user: silvatechnexusinc
          template: classic
          base: header, repositories, activity, community, metadata
          config_timezone: Africa/Nairobi
          plugin_isocalendar: yes
          plugin_stargazers: yes
          plugin_topics: yes
          plugin_activity: yes
          plugin_languages: yes
          plugin_followup: yes
          plugin_lines: yes
          plugin_traffic: yes

      - name: 🚀 Commit and Push Updates
        run: |
          git config --global user.name "Silva Tech Nexus Bot"
          git config --global user.email "admin@silvatech.top"
          git add .
          git commit -m "Automated README update [skip ci]" || echo "No changes"
          git push
